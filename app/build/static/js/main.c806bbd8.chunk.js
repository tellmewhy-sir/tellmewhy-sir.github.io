(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,a){e.exports=a(59)},32:function(e,t,a){},57:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(10),s=a.n(r),i=(a(32),a(16)),c=a(4),l=a(9),d=a(5),u=a(6),m=a(12),b=a(11),p=a(13),h={UNIPEDAL:"Unipedal",BIPEDAL:"Bipedal",QUADRUPEDAL:"Quadrupedal",ARACHNID:"Arachnid",RADIAL:"Radial",AERONAUTICAL:"Aeronautical"},f=function(){function e(){Object(d.a)(this,e),this.count=1}return Object(u.a)(e,[{key:"createRobot",value:function(e){var t=e.id,a=e.name,n=e.type,o=e.tasks;if("string"!==typeof a||"string"!==typeof n)throw new Error("Name must be string, type must be number");if(!h[n])throw new Error("Did not provide valid robot type");return new v({id:t,name:a,type:n,tasks:o})}}]),e}(),v=function(){function e(t){var a=t.id,n=t.name,o=t.type,r=t.tasks;Object(d.a)(this,e),this.id=a,this.name=n,this.type=o,this.taskCount=r?Object.keys(r).length:0,this.tasks=r||{}}return Object(u.a)(e,[{key:"assignTasks",value:function(e){if(!Array.isArray(e))throw new Error("assignTask expects to be passed an array");for(var t=0;t<e.length;t++){var a=e[t],n="task-".concat(this.taskCount);this.tasks||(this.tasks={}),this.tasks[n]=a,this.taskCount++}return this.tasks}},{key:"isValidTask",value:function(e){if(e.types&&Array.isArray(e.types))return e.types.indexOf(this.type)>=0;throw new Error("Invalid robot type object given")}},{key:"initiateTask",value:function(e,t){var a=this,n=Object(c.a)({},this.tasks[e]);if(n.types&&Array.isArray(n.types)&&(console.log(this.type,n.types),!(n.types.indexOf(this.type)>=0)))return this.tasks[e]=null,this.taskCount--,t(new Error("Invalid task for robot type"));t(null,setTimeout(function(){a.tasks[e]=null,a.taskCount--},n.eta))}}]),e}(),y=f,k=function(e){var t=Object.keys(h).map(function(e){return o.a.createElement("option",{key:e,value:e},h[e])});return o.a.createElement("div",{className:"select is-rounded"},o.a.createElement("select",{onChange:e.handleChange,value:e.value},t))},E=function(e){return o.a.createElement("div",{className:"create-bot-form"},o.a.createElement("div",{className:"field is-grouped"},o.a.createElement("div",{className:"control"},o.a.createElement("label",{className:"label",htmlFor:"robotName"},"Robot name"),o.a.createElement("input",{type:"text",className:"input is-rounded",placeholder:"required",value:e.robotName,onChange:e.handleInputChange,name:"robotName"}),e.showRequired&&o.a.createElement("div",{className:"control"},o.a.createElement("div",{className:"tag is-danger"},"A name for the robot is required."))),o.a.createElement("div",{className:"control"},o.a.createElement("label",{className:"label",htmlFor:"robotType"},"Robot type"),o.a.createElement(k,{value:e.robotType,handleChange:e.handleSelectChange})),o.a.createElement("div",{className:"control"},o.a.createElement("label",{className:"label",htmlFor:"robotAmnt"},"Number of robots"),o.a.createElement("input",{type:"number",className:"input is-rounded",value:e.robotAmnt,onChange:e.handleInputChange,name:"robotAmnt"})),o.a.createElement("div",{className:"control"},o.a.createElement("button",{className:"button is-rounded",onClick:e.handleClick},"Create Bot"))))},g=a(14);a(43),a(44);function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var A=o.a.createElement("g",{className:"robot"},o.a.createElement("rect",{className:"robot-head",id:"Rectangle",x:.5,y:46.5,width:105,height:58,rx:8}),o.a.createElement("circle",{className:"robot-eyes",id:"Oval",cx:30.5,cy:73.5,r:15.5}),o.a.createElement("circle",{className:"robot-eyes",id:"Oval-Copy",cx:76.5,cy:73.5,r:15.5}),o.a.createElement("path",{className:"robot-antenna-shaft",d:"M51.012829,13.5 L49.5230812,46.5 L56.0664924,46.5 L54.2813667,13.5 L51.012829,13.5 Z",id:"Rectangle"}),o.a.createElement("circle",{className:"robot-antenna-tip",id:"Oval",cx:53,cy:7,r:7})),C=function(e){return o.a.createElement("svg",N({className:"robot-svg",height:106,width:106,version:1.1,xmlnsXlink:"http://www.w3.org/1999/xlink"},e),A)},w=(a.p,function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).state={showLeaderBoard:!1},a.showLeaderBoard=function(){a.setState({showLeaderBoard:!0})},a.hideLeaderBoard=function(){a.setState({showLeaderBoard:!1})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=Object.keys(t.tasks).filter(function(e){return t.tasks[e]}).map(function(e){var a=t.tasks[e],n=a.description,r="task-bubble",s="bubble";return a.types&&!t.isValidTask(a)&&(n="DOES NOT COMPUTE!!",r+=" invalid",s="invalid-bubble"),o.a.createElement(g.CSSTransition,{key:e,classNames:s,timeout:2e3},o.a.createElement("div",{className:r},n))}),n=[];return this.props.leaderboard&&(n=Object.keys(this.props.leaderboard).map(function(t){return o.a.createElement("p",{key:t},"".concat(t," : ").concat(e.props.leaderboard[t]))})),o.a.createElement("div",{className:"column is-one-third"},o.a.createElement("div",{className:"contain-bot"},this.state.showLeaderBoard&&o.a.createElement("div",{className:"leaderboard"},n,o.a.createElement("button",{className:"button",onClick:this.hideLeaderBoard},"Close")),!this.state.showLeaderBoard&&o.a.createElement("div",{className:"robot"},o.a.createElement("div",{className:"robot__info"},o.a.createElement(C,null),o.a.createElement("span",{className:"robot__taskCount"},t.taskCount," task(s) remaining"),o.a.createElement("span",{className:"robot__name"},t.name),o.a.createElement("div",{className:"robot__type"},t.type),o.a.createElement(g.TransitionGroup,null,a)),o.a.createElement("div",{className:"robot__actions"},a.length>0&&o.a.createElement("button",{className:"button",onClick:function(){return e.props.completeTasks(e.props.id)}},"Start"),!a.length&&o.a.createElement("button",{className:"button",onClick:function(){return e.props.assignTasks(e.props.id)}},"More tasks"),o.a.createElement("button",{className:"button",onClick:function(){return e.props.deleteRobot(e.props.id)}},"Deactivate"),o.a.createElement("button",{className:"button",onClick:this.showLeaderBoard},"Leaderboard")))))}}]),t}(n.Component)),O=a(25),R=a.n(O),T=a(26),L=a.n(T).a.initializeApp({apiKey:"AIzaSyC3V78MLFGnyxxLI2X11lvpC4IoRjCef5Y",authDomain:"bot-o-mat.firebaseapp.com",databaseURL:"https://bot-o-mat.firebaseio.com"}),j=R.a.createClass(L.database()),I=(a(57),[{description:"do the dishes",eta:1e3},{description:"sweep the house",eta:3e3},{description:"do the laundry",eta:1e4},{description:"take out the recycling",eta:4e3},{description:"make a sammich",eta:7e3},{description:"mow the lawn",eta:2e4},{description:"rake the leaves",eta:18e3},{description:"give the dog a bath",eta:14500},{description:"bake some cookies",eta:8e3},{description:"wash the car",eta:2e4},{description:"balance dishes on head",eta:2500,types:["UNPEDAL","BIPEDAL","QUADRUPEDAL","ARACHNID"]},{description:"spin a web",eta:4e3,types:["ARACHNID"]},{description:"break the sound barrier",eta:6e3,types:["AERONAUTICAL"]},{description:"climb up tree",eta:3500,types:["BIPEDAL","ARACHNID"]},{description:"travel overseas",eta:3e4,types:["AERONAUTICAL"]},{description:"crochet a scarf",eta:7e3,types:["ARACHNID"]},{description:"make a soccer goal",eta:4e3,types:["BIPEDAL","ARACHNID"]},{description:"paint driveway",eta:2e4,types:["RADIAL"]},{description:"rock climb up a cliff",eta:4e4,type:["BIPEDAL","QUADRUPEDAL","ARACHNID"]}]),B=new y,D=function(){return"_"+Math.random().toString(36).substr(2,9)},S=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(m.a)(this,Object(b.a)(t).call(this))).addBot=function(t){var a=j.push("bots",{data:t,then:function(e){if(!e)return!1}}).key,n={};for(var o in t.tasks)n[t.tasks[o].description]=0;j.update("leaderboards",{data:Object(l.a)({},a,n),then:function(e){if(!e)return!1}});var r=Object(c.a)({},e.state.timers);r[a]=[],e.setState({timers:r})},e.deleteBot=function(e){j.remove("bots/".concat(e),function(e){if(!e)return!1}),j.remove("leaderboards/".concat(e),function(e){if(!e)return!1})},e.updateBot=function(e,t){j.update("bots/".concat(e),{data:t,then:function(e){if(!e)return!1}})},e.handleInputChange=function(t){var a=t.target.name;e.setState(Object(l.a)({},a,t.target.value))},e.handleSelectChange=function(t){e.setState({robotType:t.target.value})},e.handleCreateFormSubmit=function(){if(!e.state.robotName)return e.setState({showRequired:!0}),!1;if(e.setState({showRequired:!1}),e.state.robotAmnt>1)for(var t=e.state.robotName,a=0;a<e.state.robotAmnt;a++){var n="".concat(t).concat(D());e.createRobot(n,e.state.robotType)}else{var o=e.state,r=o.robotName,s=o.robotType;e.createRobot(r,s)}e.setState({robotName:"",robotType:"UNIPEDAL",robotAmnt:1})},e.createRobot=function(t,a){var n;try{n=B.createRobot({name:t,type:a,id:"bot".concat(D())})}catch(o){console.log(o)}if(n)try{n.assignTasks(e.getTasks()),e.addBot(n)}catch(o){console.log(o)}else console.log("Could not create robot")},e.logTimer=function(t,a){var n=Object(c.a)({},e.state.timers),o=Object(i.a)(n[t]);o.push(a),n[t]=o,e.setState(function(e,t){return{timers:n}})},e.updateLeaderBoard=function(t,a){var n=1;e.state.leaderboards[t][a.description]&&(n=e.state.leaderboards[t][a.description]+1),j.update("leaderboards/".concat(t),{data:Object(l.a)({},a.description,n),then:function(e){}})},e.handleAssignTasks=function(t){var a=Object(c.a)({},e.state.bots)[t];a.tasks||(a.tasks={});var n=B.createRobot(a);n.assignTasks(e.getTasks()),e.updateBot(t,n)},e.getTasks=function(){for(var e=Object(i.a)(I),t=[],a=0;a<5;a++){var n=Math.floor(Math.random()*e.length);t.push(e.splice(n,1)[0])}return t},e.handleCompleteTasks=function(t){for(var a=Object(c.a)({},e.state.bots),n=B.createRobot(a[t]),o=Object.keys(n.tasks),r=Object(c.a)({},n.tasks),s=function(a){n.initiateTask(o[a],function(s,i){if(s)return setTimeout(function(){e.updateBot(t,n)},0),console.log("".concat(n.name," can't ").concat(r[o[a]].description)),!1;e.updateLeaderBoard(t,r[o[a]])}),setTimeout(function(){e.updateBot(t,n)},r[o[a]].eta)},i=0;i<o.length;i++)s(i)},e.state={robotName:"",robotType:"UNIPEDAL",robotAmnt:1,showRequired:!1,timers:{},bots:{},leaderboards:{}},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.botsRef=j.bindToState("bots",{context:this,state:"bots"}),this.leadBoardRef=j.bindToState("leaderboards",{context:this,state:"leaderboards"})}},{key:"componentWillUnmount",value:function(){j.removeBinding(this.botsRef),j.removeBinding(this.leadBoardRef)}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.bots).map(function(t){var a=e.state.bots[t];return o.a.createElement(w,{key:t,id:t,data:B.createRobot(a),leaderboard:e.state.leaderboards[t],deleteRobot:e.deleteBot,handleInputChange:e.handleInputChange,completeTasks:e.handleCompleteTasks,assignTasks:e.handleAssignTasks})});return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"topbar"},o.a.createElement(E,{robotType:this.state.robotType,robotName:this.state.robotName,robotAmnt:this.state.robotAmnt,showRequired:this.state.showRequired,handleClick:this.handleCreateFormSubmit,handleInputChange:this.handleInputChange,handleSelectChange:this.handleSelectChange})),o.a.createElement("div",{className:"contain-bots"},o.a.createElement("div",{className:"columns is-gapless is-multiline"},t)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[27,2,1]]]);
//# sourceMappingURL=main.c806bbd8.chunk.js.map